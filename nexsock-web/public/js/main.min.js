"use strict";(()=>{var i={SERVICE_CONFIG:e=>`nexsock_service_config_${e}`,GIT_CONTENT_COLLAPSED:e=>`git_${e}_collapsed`};function g(e,t,n,o=""){let r=i.SERVICE_CONFIG(e),s=c(e);s[t]={envVars:n,description:o,lastUsed:new Date().toISOString(),created:s[t]?.created||new Date().toISOString()},localStorage.setItem(r,JSON.stringify(s)),console.log(`Saved configuration '${t}' for service '${e}'`)}function c(e){let t=i.SERVICE_CONFIG(e),n=localStorage.getItem(t);return n?JSON.parse(n):{}}function m(e,t){return c(e)[t]||null}function v(e,t){let n=i.SERVICE_CONFIG(e),o=c(e);return o[t]?(delete o[t],localStorage.setItem(n,JSON.stringify(o)),console.log(`Deleted configuration '${t}' for service '${e}'`),!0):!1}function p(e){let t={},n=document.getElementById(`env-vars-${e}`);return n&&n.querySelectorAll(".env-var-pair").forEach(o=>{let r=o.querySelectorAll("input"),[s,h]=r;s?.value&&(t[s.value]=h?.value||"")}),t}function E(e,t){let n=document.getElementById(`env-vars-${e}`);n&&(n.innerHTML="",Object.entries(t).forEach(([o,r])=>{window.htmx.ajax("GET",`/api/templates/env-var-pair?key=${encodeURIComponent(o)}&value=${encodeURIComponent(r)}`,{target:`#env-vars-${e}`,swap:"beforeend"})}),window.htmx.ajax("GET","/api/templates/env-var-pair",{target:`#env-vars-${e}`,swap:"beforeend"}))}function w(e){let t=document.getElementById(`env-vars-${e}`);t&&confirm("Clear all current environment variables?")&&(t.innerHTML="",window.htmx.ajax("GET","/api/templates/env-var-pair",{target:`#env-vars-${e}`,swap:"beforeend"}),a("Environment variables cleared","info"))}function y(e,t){if(!t)return;let n=m(e,t);n&&(E(e,n.envVars),console.log(`Loaded configuration '${t}' for service '${e}'`))}function b(e){let t=p(e);if(Object.keys(t).length===0){a("Please add some environment variables before saving a configuration.","warning");return}let n=prompt("Enter a name for this configuration:");if(!n)return;let o=prompt("Enter a description (optional):")||"";g(e,n,t,o),l(e),a(`Configuration '${n}' saved successfully!`,"success")}function l(e){window.htmx.ajax("GET",`/api/templates/config-section?service=${encodeURIComponent(e)}`,{target:`#config-section-${e}`,swap:"innerHTML"})}function C(e,t){confirm(`Are you sure you want to delete the configuration '${t}'?`)&&(v(e,t),window.htmx.ajax("GET",`/api/templates/config-modal-content?service=${encodeURIComponent(e)}`,{target:".modal-body",swap:"innerHTML"}),l(e),a(`Configuration '${t}' deleted successfully.`,"success"))}function L(e){let t=document.getElementById(`management-${e}`);if(t){let n=t.style.display==="none";t.style.display=n?"block":"none"}}function u(){let e=document.querySelector(".modal-overlay");e&&e.remove()}function a(e,t="info"){let n=document.createElement("div");n.className=`message message-${t}`,n.textContent=e;let o=document.getElementById("messages-container");o||(o=document.createElement("div"),o.id="messages-container",o.className="messages",document.body.appendChild(o)),o.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},5e3)}async function T(e){if(!e){a("Invalid service name","error");return}if(confirm(`Are you sure you want to remove ${e}? This action cannot be undone.`))try{let t=await fetch(`/api/services/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`HTTP error: ${t.status}`);a(`Service '${e}' removed successfully.`,"success"),window.location.href="/"}catch(t){console.error("Error removing service:",t),a("Failed to remove service","error")}}function S(e,t){document.querySelectorAll(".tab-button").forEach(r=>{r.classList.remove("active")});let n=event?.target;n&&n.classList.add("active");let o=document.getElementById("git-tab-content");o&&(e==="commits"?(o.innerHTML='<div class="loading">Loading commits...</div>',window.htmx.ajax("GET",`/api/templates/git-log?service=${t}`,{target:"#git-tab-content",swap:"innerHTML"})):e==="branches"&&(o.innerHTML='<div class="loading">Loading branches...</div>',window.htmx.ajax("GET",`/api/templates/git-branches?service=${t}`,{target:"#git-tab-content",swap:"innerHTML"})))}function I(e){let t=document.getElementById("new-branch-name");if(!t)return;let n=t.value.trim();if(!n){a("Please enter a branch name","warning");return}if(!confirm(`Create new branch "${n}" and switch to it?`))return;let o=new FormData;o.append("branch",n),o.append("create","true"),fetch(`/api/services/${e}/git/checkout/branch`,{method:"POST",body:o}).then(r=>{if(!r.ok)throw new Error(`HTTP error: ${r.status}`);return r.json()}).then(r=>{t.value="",window.htmx.ajax("GET",`/api/templates/git-section?service=${e}`,{target:"#git-section",swap:"outerHTML"}),a(`Successfully created and switched to branch "${n}"`,"success")}).catch(r=>{console.error("Error creating branch:",r),a("Failed to create branch","error")})}function $(e){window.htmx.ajax("GET",`/api/templates/git-section?service=${e}`,{target:"#git-section",swap:"outerHTML"})}function x(e){let t=document.getElementById(e);if(!t)return;t.classList.toggle("collapsed");let n=t.classList.contains("collapsed");localStorage.setItem(i.GIT_CONTENT_COLLAPSED(e),n.toString())}function d(){let e=localStorage.getItem(i.GIT_CONTENT_COLLAPSED("git-commits-list"))==="true",t=document.getElementById("git-commits-list");t&&e&&t.classList.add("collapsed");let n=localStorage.getItem(i.GIT_CONTENT_COLLAPSED("git-branches-list"))==="true",o=document.getElementById("git-branches-list");o&&n&&o.classList.add("collapsed")}function G(e){let t=document.getElementById(e);t&&(document.querySelectorAll(".dropdown.active").forEach(n=>{n.id!==e&&n.classList.remove("active")}),t.classList.toggle("active"))}function f(){document.querySelectorAll(".dropdown.active").forEach(e=>{e.classList.remove("active")})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-service-name]").forEach(e=>{let t=e.getAttribute("data-service-name");t&&l(t)}),d(),document.body.addEventListener("htmx:responseError",e=>{console.error("HTMX Error:",e.detail),a("An error occurred while loading content","error")}),document.body.addEventListener("htmx:beforeRequest",e=>{let t=e.target;t.classList.contains("button")&&t.classList.add("button-loading")}),document.body.addEventListener("htmx:afterRequest",e=>{let t=e.target;t.classList.contains("button")&&t.classList.remove("button-loading"),d()})});document.addEventListener("click",e=>{let t=e.target;t.classList.contains("modal-overlay")&&u(),t.closest(".dropdown")||f()});document.addEventListener("keydown",e=>{e.key==="Escape"&&(u(),f())});var O={saveServiceConfig:g,getServiceConfigs:c,loadServiceConfig:m,deleteServiceConfig:v,getCurrentEnvVars:p,applyEnvVarsToForm:E,loadConfigFromSelection:y,showSaveConfigModal:b,refreshConfigUI:l,deleteConfigAndRefresh:C,toggleManagement:L,closeModal:u,showMessage:a,confirmRemove:T,showGitTab:S,createNewBranch:I,refreshGitSection:$,toggleDropdown:G,closeAllDropdowns:f,clearCurrentEnvVars:w,toggleGitContent:x,restoreGitContentVisibility:d};window.nexsock=O;})();
//# sourceMappingURL=main.min.js.map
